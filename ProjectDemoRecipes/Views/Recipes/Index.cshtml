@model IEnumerable<ProjectDemoRecipes.Models.Recipe>

<h2 class="mb-4">Recipes</h2>

<!-- Search and Filtering Form -->
<div class="card mb-4 shadow-sm">
    <div class="card-body">
        <form method="get" asp-action="Index" class="row g-3">
            <!-- Search Bar -->
            <div class="col-md-8">
                <div class="input-group">
                    <input type="text" name="searchQuery" class="form-control"
                           placeholder="Search recipes..."
                           value="@ViewContext.HttpContext.Request.Query["searchQuery"]" />
                    <button type="submit" class="btn btn-primary">Search</button>
                </div>
            </div>

            <!-- Filters -->
            <div class="col-md-4">
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="isVegetarian" value="true"
                           id="isVegetarian"
                    @(ViewContext.HttpContext.Request.Query["isVegetarian"] == "true" ? "checked" : "") />
                    <label class="form-check-label" for="isVegetarian">Vegetarian</label>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" name="isLactoseFree" value="true"
                           id="isLactoseFree"
                    @(ViewContext.HttpContext.Request.Query["isLactoseFree"] == "true" ? "checked" : "") />
                    <label class="form-check-label" for="isLactoseFree">Lactose-Free</label>
                </div>
            </div>

            <!-- Buttons -->
            <div class="col-12">
                <button type="submit" class="btn btn-primary">Filter</button>
                <a asp-action="Index" class="btn btn-secondary">Reset</a>
            </div>
        </form>
    </div>
</div>

<!-- Recipes Table -->
@if (Model != null && Model.Any())
{
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>Title</th>
                <th>Cooking Time (min)</th>
                <th>Vegetarian</th>
                <th>Lactose-Free</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Title</td>
                    <td>@item.CookingTime</td>
                    <td>@(item.IsVegetarian ? "Yes" : "No")</td>
                    <td>@(item.IsLactoseFree ? "Yes" : "No")</td>
                    <td>
                        <a class="btn btn-sm btn-info" asp-action="Details" asp-route-id="@item.Id">Details</a>
                        <a class="btn btn-sm btn-warning" asp-action="Edit" asp-route-id="@item.Id">Edit</a>
                        <a class="btn btn-sm btn-danger" asp-action="Delete" asp-route-id="@item.Id">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <p class="text-muted">No recipes available. Try adjusting the filters or adding new recipes.</p>
}
